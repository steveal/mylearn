<!DOCTYPE html>
<html>
<head>
	<meta charset = "utf-8"/>
<title>backbone-model</title>
</head>
<body>
</body>


  <script src="js/jquery/jquery.js"></script>
  <script src="js/underscore.js"></script>
  <script src="js/backbone.js"></script>
  <script src="js/demo.js"></script>
<script>
(function ($) {
    /**
    *此处填充代码下面练习代码
    **/
    var Todo = Backbone.Model.extend({
        defaults: {
            title : 'default',
            completed : false
        }
    })
   
   var TodoList = Backbone.Collection.extend({
    model : Todo
   })

   var Todos = new TodoList
   Todos.add([
        {title:'go to Belgium.',  completed : false},
        {title:'go to China.',  completed : false},
        {title:'go to Astria.',  completed : false}
    ])

   var printTodoList = function(model){
        console.log(model.get('title'))
   }
   //Todos.forEach(printTodoList) 

   var TodosAfterSort = Todos.sortBy(function(model) {
        return model.get('title').toLowerCase()
   })

   console.log("After sortBy")
   //TodosAfterSort.forEach(printTodoList)
   Todos.add(new Todo({title:'x'}))
   Todos.add({title:'xxxx'})
   console.log(Todos.size())
   // console.log(TodosAfterSort.size())

   var todoItem = new Todo({title:'todoItem'})
   todoItem.set({url: '/do'
   })
   console.log(todoItem.isNew)
// todoItem.save()
   var collection = new Backbone.Collection([
  { name: 'Tim', age: 5 },
  { name: 'Ida', age: 26 },
  { name: 'Rob', age: 55 }
]);

var filteredNames = collection.chain() // start chain, returns wrapper around collection's models
  .filter(function(item) { return item.get('age') > 10; }) // returns wrapped array excluding Tim
  .map(function(item) { return item.get('name'); }) // returns wrapped array containing remaining names
  .value(); // terminates the chain and returns the resulting array

console.log(filteredNames); // logs: ['Ida', 'Rob']

var TodosCollection = Backbone.Collection.extend({
  model: Todo,
  url: '/todolistjosn.txt'
});

var todos = new TodosCollection();
todos.fetch();

var ourObject = {};

// Mixin
_.extend(ourObject, Backbone.Events);

function dancing (msg) { console.log("We " + msg); }

// Add namespaced custom events
ourObject.on("dance:tap", dancing);
ourObject.on("dance:break", dancing);

// Trigger the custom events. Each will be caught and acted upon.
ourObject.trigger("dance:tap", "started tap dancing. Yeah!");
ourObject.trigger("dance:break", "started break dancing. Yeah!");

ourObject.trigger('dance:tap', {key:'food', value:'meat'});

// Removes event bound to the object
ourObject.off("dance:tap");

// Trigger the custom events again, but one is logged.
ourObject.trigger("dance:tap", "stopped tap dancing."); // won't be logged as it's not listened for
ourObject.trigger("dance:break", "break dancing. Yeah!");


})(jQuery)

</script>
</html>